<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 0: Flask Basics | Days 5-6</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-dark: #0a0f0d;
            --bg-card: #121a16;
            --bg-input: #1a2620;
            --border: #2d4a3e;
            --text-primary: #e8f0ec;
            --text-secondary: #9cb0a4;
            --text-muted: #6a8070;
            --accent-green: #00d67d;
            --accent-lime: #a3e635;
            --accent-blue: #38bdf8;
            --accent-purple: #a78bfa;
            --accent-orange: #fb923c;
            --accent-red: #f87171;
            --accent-cyan: #22d3ee;
            --accent-pink: #f472b6;
            --accent-yellow: #fbbf24;
            --gradient-start: #00d67d;
            --gradient-mid: #38bdf8;
            --gradient-end: #a78bfa;
            --flask-dark: #0d1117;
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-mid) 50%, var(--gradient-end) 100%);
            padding: 20px 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 4px 30px rgba(0, 214, 125, 0.3);
        }

        .header h1 {
            font-size: 24px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
            color: #0a0f0d;
        }

        .header h1 .icon {
            font-size: 28px;
        }

        .header .week-badge {
            background: rgba(0,0,0,0.2);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            color: #0a0f0d;
            backdrop-filter: blur(10px);
        }

        .progress-bar {
            height: 4px;
            background: rgba(255,255,255,0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-green), var(--accent-lime));
            width: 0%;
            transition: width 0.5s ease;
        }

        /* Main Layout */
        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            height: calc(100vh - 80px);
        }

        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr;
                height: auto;
            }
        }

        /* Left Panel - Lessons */
        .lesson-panel {
            padding: 0;
            overflow-y: auto;
            border-right: 1px solid var(--border);
        }

        /* Tabs */
        .tabs {
            display: flex;
            background: var(--bg-card);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
            overflow-x: auto;
        }

        .tab {
            padding: 14px 18px;
            background: none;
            border: none;
            color: var(--text-secondary);
            font-family: 'Space Grotesk', sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .tab:hover {
            color: var(--text-primary);
            background: var(--bg-input);
        }

        .tab.active {
            color: var(--accent-green);
            border-bottom-color: var(--accent-green);
        }

        /* Tab Content */
        .tab-content {
            display: none;
            padding: 30px;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Typography */
        .tab-content h2 {
            color: var(--accent-green);
            font-size: 24px;
            margin-bottom: 16px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
        }

        .tab-content h3 {
            color: var(--accent-blue);
            font-size: 18px;
            margin-top: 28px;
            margin-bottom: 12px;
        }

        .tab-content h4 {
            color: var(--accent-lime);
            font-size: 16px;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        .tab-content p {
            color: var(--text-secondary);
            margin-bottom: 16px;
        }

        /* Info Boxes */
        .info-box {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 16px 20px;
            margin: 16px 0;
        }

        .info-box.tip {
            border-left: 4px solid var(--accent-green);
            background: linear-gradient(90deg, rgba(0, 214, 125, 0.1), transparent);
        }

        .info-box.warning {
            border-left: 4px solid var(--accent-orange);
            background: linear-gradient(90deg, rgba(251, 146, 60, 0.1), transparent);
        }

        .info-box.important {
            border-left: 4px solid var(--accent-red);
            background: linear-gradient(90deg, rgba(248, 113, 113, 0.1), transparent);
        }

        .info-box.concept {
            border-left: 4px solid var(--accent-purple);
            background: linear-gradient(90deg, rgba(167, 139, 250, 0.1), transparent);
        }

        .info-box.flask {
            border-left: 4px solid var(--accent-blue);
            background: linear-gradient(90deg, rgba(56, 189, 248, 0.1), transparent);
        }

        .info-box-title {
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-box.tip .info-box-title { color: var(--accent-green); }
        .info-box.warning .info-box-title { color: var(--accent-orange); }
        .info-box.important .info-box-title { color: var(--accent-red); }
        .info-box.concept .info-box-title { color: var(--accent-purple); }
        .info-box.flask .info-box-title { color: var(--accent-blue); }

        /* Code Blocks */
        .code-block {
            background: var(--flask-dark);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 16px;
            margin: 16px 0;
            overflow-x: auto;
            position: relative;
        }

        .code-block pre {
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            line-height: 1.6;
            color: var(--text-primary);
            margin: 0;
        }

        .code-block .copy-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            color: var(--text-secondary);
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .code-block:hover .copy-btn {
            opacity: 1;
        }

        .code-block .copy-btn:hover {
            background: var(--border);
            color: var(--text-primary);
        }

        .code-block .filename {
            position: absolute;
            top: -10px;
            left: 16px;
            background: var(--bg-card);
            padding: 2px 10px;
            border-radius: 4px;
            font-size: 12px;
            color: var(--accent-green);
            font-family: 'JetBrains Mono', monospace;
        }

        /* Syntax Highlighting */
        .keyword { color: var(--accent-pink); }
        .string { color: var(--accent-green); }
        .number { color: var(--accent-orange); }
        .comment { color: #6a8070; font-style: italic; }
        .function { color: var(--accent-blue); }
        .class-name { color: var(--accent-cyan); }
        .builtin { color: var(--accent-purple); }
        .operator { color: var(--accent-red); }
        .decorator { color: var(--accent-yellow); }
        .route { color: var(--accent-lime); }

        /* Exercise Cards */
        .exercise {
            background: linear-gradient(135deg, rgba(0, 214, 125, 0.1) 0%, rgba(56, 189, 248, 0.1) 100%);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .exercise-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }

        .exercise-number {
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-mid));
            color: #0a0f0d;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
        }

        .exercise-title {
            font-weight: 600;
            color: var(--text-primary);
        }

        .exercise-description {
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        .load-exercise-btn {
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-mid));
            color: #0a0f0d;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .load-exercise-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 214, 125, 0.4);
        }

        /* Topic Grid */
        .topic-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 16px;
            margin: 20px 0;
        }

        .topic-card {
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .topic-card:hover {
            border-color: var(--accent-green);
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 214, 125, 0.2);
        }

        .topic-card .icon {
            font-size: 32px;
            margin-bottom: 12px;
        }

        .topic-card .title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 6px;
        }

        .topic-card .desc {
            font-size: 13px;
            color: var(--text-muted);
        }

        /* Comparison Table */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
            font-size: 14px;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 12px;
            text-align: left;
            border: 1px solid var(--border);
        }

        .comparison-table th {
            background: var(--bg-input);
            color: var(--accent-green);
            font-weight: 600;
        }

        .comparison-table td {
            background: var(--bg-card);
            color: var(--text-secondary);
        }

        .comparison-table code {
            background: var(--bg-input);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
        }

        /* Inline code */
        code {
            background: var(--bg-input);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            color: var(--accent-cyan);
        }

        /* HTTP Method Badges */
        .method-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .method-badge.get {
            background: rgba(0, 214, 125, 0.2);
            color: var(--accent-green);
        }

        .method-badge.post {
            background: rgba(56, 189, 248, 0.2);
            color: var(--accent-blue);
        }

        .method-badge.put {
            background: rgba(251, 146, 60, 0.2);
            color: var(--accent-orange);
        }

        .method-badge.delete {
            background: rgba(248, 113, 113, 0.2);
            color: var(--accent-red);
        }

        /* Day Separator */
        .day-separator {
            display: flex;
            align-items: center;
            gap: 16px;
            margin: 30px 0;
            color: var(--accent-green);
        }

        .day-separator::before,
        .day-separator::after {
            content: '';
            flex: 1;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--border), transparent);
        }

        .day-badge {
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-mid));
            padding: 6px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
            color: #0a0f0d;
        }

        /* Right Panel - Code Editor */
        .editor-panel {
            display: flex;
            flex-direction: column;
            background: var(--bg-card);
        }

        .editor-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: var(--bg-input);
            border-bottom: 1px solid var(--border);
        }

        .editor-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            font-size: 14px;
        }

        .editor-title .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .editor-title .dot.green { background: var(--accent-green); }

        .editor-actions {
            display: flex;
            gap: 8px;
        }

        .editor-btn {
            background: var(--bg-card);
            border: 1px solid var(--border);
            color: var(--text-secondary);
            padding: 6px 14px;
            border-radius: 6px;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .editor-btn:hover {
            background: var(--border);
            color: var(--text-primary);
        }

        .editor-btn.run {
            background: linear-gradient(135deg, var(--accent-green), var(--accent-lime));
            border: none;
            color: #0a0a0a;
            font-weight: 600;
        }

        .editor-btn.run:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        /* Code Editor */
        .code-editor-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 0;
        }

        .code-editor-wrapper {
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        .code-editor {
            width: 100%;
            height: 100%;
            background: var(--bg-dark);
            border: none;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 14px;
            line-height: 1.6;
            padding: 16px;
            resize: none;
            outline: none;
            tab-size: 4;
        }

        .code-editor::placeholder {
            color: var(--text-muted);
        }

        /* Output Panel */
        .output-panel {
            border-top: 1px solid var(--border);
            background: var(--bg-dark);
        }

        .output-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 16px;
            background: var(--bg-input);
            border-bottom: 1px solid var(--border);
        }

        .output-title {
            font-size: 13px;
            font-weight: 500;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .output-status {
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 4px;
        }

        .output-status.success {
            background: rgba(0, 214, 125, 0.2);
            color: var(--accent-green);
        }

        .output-status.error {
            background: rgba(248, 113, 113, 0.2);
            color: var(--accent-red);
        }

        .output-content {
            padding: 16px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            line-height: 1.6;
            min-height: 150px;
            max-height: 250px;
            overflow-y: auto;
            white-space: pre-wrap;
        }

        .output-content .output-line {
            margin-bottom: 4px;
        }

        /* Diagram / Flow */
        .flow-diagram {
            background: var(--flask-dark);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 24px;
            margin: 16px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .flow-box {
            background: var(--bg-card);
            border: 2px solid var(--accent-green);
            border-radius: 8px;
            padding: 12px 20px;
            color: var(--text-primary);
            font-weight: 500;
            text-align: center;
        }

        .flow-box.request {
            border-color: var(--accent-blue);
        }

        .flow-box.response {
            border-color: var(--accent-purple);
        }

        .flow-box.flask {
            border-color: var(--accent-green);
            background: rgba(0, 214, 125, 0.1);
        }

        .flow-arrow {
            color: var(--accent-orange);
            font-size: 24px;
        }

        /* Terminal style */
        .terminal {
            background: #000;
            border-radius: 8px;
            overflow: hidden;
            margin: 16px 0;
        }

        .terminal-header {
            background: #333;
            padding: 8px 12px;
            display: flex;
            gap: 6px;
        }

        .terminal-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .terminal-dot.red { background: #ff5f56; }
        .terminal-dot.yellow { background: #ffbd2e; }
        .terminal-dot.green { background: #27ca40; }

        .terminal-body {
            padding: 16px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            color: #00ff00;
        }

        .terminal-body .command::before {
            content: "$ ";
            color: var(--accent-cyan);
        }

        .terminal-body .output {
            color: #ccc;
            margin-left: 0;
        }

        .terminal-body .server {
            color: var(--accent-green);
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-dark);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-muted);
        }

        /* API Endpoint Display */
        .endpoint {
            background: var(--flask-dark);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px 16px;
            margin: 12px 0;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .endpoint .path {
            font-family: 'JetBrains Mono', monospace;
            color: var(--text-primary);
        }

        .endpoint .desc {
            color: var(--text-muted);
            font-size: 13px;
            margin-left: auto;
        }

        /* Checklist */
        .checklist {
            list-style: none;
            margin: 16px 0;
        }

        .checklist li {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 8px 0;
            color: var(--text-secondary);
        }

        .checklist li::before {
            content: "‚óã";
            color: var(--accent-green);
            font-weight: bold;
        }
    </style>
</head>
<body>
    <header class="header">
        <h1>
            <span class="icon">üå∂Ô∏è</span>
            Flask Basics
        </h1>
        <span class="week-badge">Week 0 ¬∑ Days 5-6</span>
    </header>
    <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
    </div>

    <div class="container">
        <!-- Left Panel: Lesson Content -->
        <div class="lesson-panel">
            <div class="tabs">
                <button class="tab active" onclick="showTab('overview')">üìã Overview</button>
                <button class="tab" onclick="showTab('intro')">üå∂Ô∏è Flask Intro</button>
                <button class="tab" onclick="showTab('routes')">üõ§Ô∏è Routes</button>
                <button class="tab" onclick="showTab('templates')">üìÑ Templates</button>
                <button class="tab" onclick="showTab('requests')">üì® Requests</button>
                <button class="tab" onclick="showTab('json')">üîå JSON APIs</button>
                <button class="tab" onclick="showTab('exercises')">üéØ Exercises</button>
                <button class="tab" onclick="showTab('challenge')">üöÄ Challenge</button>
            </div>

            <!-- Overview Tab -->
            <div id="overview" class="tab-content active">
                <h2>Welcome to Flask! üå∂Ô∏è</h2>
                <p>Flask is a lightweight web framework that's perfect for learning web development. It's simple enough to understand quickly, yet powerful enough for real applications. These two days will prepare you for building APIs with FastAPI!</p>

                <div class="topic-grid">
                    <div class="topic-card" onclick="showTab('intro')">
                        <div class="icon">üå∂Ô∏è</div>
                        <div class="title">Flask Intro</div>
                        <div class="desc">Setup & first app</div>
                    </div>
                    <div class="topic-card" onclick="showTab('routes')">
                        <div class="icon">üõ§Ô∏è</div>
                        <div class="title">Routes</div>
                        <div class="desc">URLs & parameters</div>
                    </div>
                    <div class="topic-card" onclick="showTab('templates')">
                        <div class="icon">üìÑ</div>
                        <div class="title">Templates</div>
                        <div class="desc">HTML with Jinja2</div>
                    </div>
                    <div class="topic-card" onclick="showTab('requests')">
                        <div class="icon">üì®</div>
                        <div class="title">Requests</div>
                        <div class="desc">Forms & data</div>
                    </div>
                    <div class="topic-card" onclick="showTab('json')">
                        <div class="icon">üîå</div>
                        <div class="title">JSON APIs</div>
                        <div class="desc">RESTful endpoints</div>
                    </div>
                </div>

                <h3>How Flask Works</h3>
                <div class="flow-diagram">
                    <div class="flow-box request">Browser<br><small>Request</small></div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-box flask">Flask<br><small>Routes & Logic</small></div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-box response">Browser<br><small>Response</small></div>
                </div>

                <div class="info-box flask">
                    <div class="info-box-title">üéØ Why Learn Flask First?</div>
                    <ul style="margin-left: 20px; margin-top: 10px; color: var(--text-secondary);">
                        <li><strong>Simpler than FastAPI:</strong> No async/await complexity yet</li>
                        <li><strong>Same concepts:</strong> Routes, requests, responses, JSON</li>
                        <li><strong>Quick results:</strong> Build working apps in minutes</li>
                        <li><strong>Foundation:</strong> Makes FastAPI much easier to learn</li>
                    </ul>
                </div>

                <h3>What You'll Build</h3>
                <p>By the end of Day 6, you'll create a complete <strong>Bookmarks API</strong> with:</p>
                <ul class="checklist">
                    <li>Multiple routes with URL parameters</li>
                    <li>GET and POST request handling</li>
                    <li>JSON API responses</li>
                    <li>HTML templates for a simple UI</li>
                    <li>Error handling</li>
                </ul>
            </div>

            <!-- Flask Intro Tab -->
            <div id="intro" class="tab-content">
                <div class="day-separator">
                    <span class="day-badge">Day 5</span>
                </div>

                <h2>Getting Started with Flask üå∂Ô∏è</h2>
                <p>Let's set up Flask and create your first web application!</p>

                <h3>Installation</h3>
                <div class="terminal">
                    <div class="terminal-header">
                        <div class="terminal-dot red"></div>
                        <div class="terminal-dot yellow"></div>
                        <div class="terminal-dot green"></div>
                    </div>
                    <div class="terminal-body">
                        <div class="command">mkdir flask_app && cd flask_app</div>
                        <div class="command">python -m venv venv</div>
                        <div class="command">source venv/bin/activate</div>
                        <div class="command">pip install flask</div>
                        <div class="output">Successfully installed flask-3.0.0 ...</div>
                    </div>
                </div>

                <h3>Your First Flask App</h3>
                <div class="code-block">
                    <span class="filename">app.py</span>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><span class="keyword">from</span> flask <span class="keyword">import</span> Flask

<span class="comment"># Create the Flask application</span>
app = Flask(__name__)

<span class="comment"># Define a route</span>
<span class="decorator">@app.route</span>(<span class="string">"/"</span>)
<span class="keyword">def</span> <span class="function">home</span>():
    <span class="keyword">return</span> <span class="string">"Hello, World!"</span>

<span class="comment"># Run the app</span>
<span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:
    app.run(debug=<span class="keyword">True</span>)</pre>
                </div>

                <h3>Running Your App</h3>
                <div class="terminal">
                    <div class="terminal-header">
                        <div class="terminal-dot red"></div>
                        <div class="terminal-dot yellow"></div>
                        <div class="terminal-dot green"></div>
                    </div>
                    <div class="terminal-body">
                        <div class="command">python app.py</div>
                        <div class="server"> * Running on http://127.0.0.1:5000</div>
                        <div class="server"> * Debug mode: on</div>
                        <div class="output">Press CTRL+C to quit</div>
                    </div>
                </div>

                <div class="info-box tip">
                    <div class="info-box-title">üí° Debug Mode Benefits</div>
                    <ul style="margin-left: 20px; margin-top: 10px; color: var(--text-secondary);">
                        <li><strong>Auto-reload:</strong> Changes are applied without restart</li>
                        <li><strong>Better errors:</strong> Detailed error pages in browser</li>
                        <li><strong>Debugger:</strong> Interactive debugger for exceptions</li>
                    </ul>
                    <p style="margin-top: 10px; color: var(--accent-orange);">‚ö†Ô∏è Never use debug=True in production!</p>
                </div>

                <h3>Understanding the Code</h3>
                <div class="code-block">
                    <pre><span class="comment"># 1. Import Flask class</span>
<span class="keyword">from</span> flask <span class="keyword">import</span> Flask

<span class="comment"># 2. Create an instance of the Flask class</span>
<span class="comment">#    __name__ tells Flask where to find templates, static files, etc.</span>
app = Flask(__name__)

<span class="comment"># 3. The @app.route decorator maps URLs to functions</span>
<span class="decorator">@app.route</span>(<span class="string">"/"</span>)   <span class="comment"># When someone visits "/"</span>
<span class="keyword">def</span> <span class="function">home</span>():        <span class="comment"># Run this function</span>
    <span class="keyword">return</span> <span class="string">"Hello!"</span>  <span class="comment"># Send this to the browser</span>

<span class="comment"># 4. This block runs when you execute the file directly</span>
<span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:
    app.run(debug=<span class="keyword">True</span>)</pre>
                </div>

                <h3>Adding More Routes</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><span class="keyword">from</span> flask <span class="keyword">import</span> Flask

app = Flask(__name__)

<span class="decorator">@app.route</span>(<span class="string">"/"</span>)
<span class="keyword">def</span> <span class="function">home</span>():
    <span class="keyword">return</span> <span class="string">"Welcome to my Flask app!"</span>

<span class="decorator">@app.route</span>(<span class="string">"/about"</span>)
<span class="keyword">def</span> <span class="function">about</span>():
    <span class="keyword">return</span> <span class="string">"This is the about page."</span>

<span class="decorator">@app.route</span>(<span class="string">"/contact"</span>)
<span class="keyword">def</span> <span class="function">contact</span>():
    <span class="keyword">return</span> <span class="string">"Contact us at hello@example.com"</span>

<span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:
    app.run(debug=<span class="keyword">True</span>)</pre>
                </div>

                <p>Now you can visit:</p>
                <div class="endpoint">
                    <span class="method-badge get">GET</span>
                    <span class="path">/</span>
                    <span class="desc">Home page</span>
                </div>
                <div class="endpoint">
                    <span class="method-badge get">GET</span>
                    <span class="path">/about</span>
                    <span class="desc">About page</span>
                </div>
                <div class="endpoint">
                    <span class="method-badge get">GET</span>
                    <span class="path">/contact</span>
                    <span class="desc">Contact page</span>
                </div>

                <div class="exercise">
                    <div class="exercise-header">
                        <span class="exercise-number">1</span>
                        <span class="exercise-title">Try It: First Flask App</span>
                    </div>
                    <div class="exercise-description">
                        Create a Flask app with routes for /, /hello, and /goodbye. Each should return a different message.
                    </div>
                    <button class="load-exercise-btn" onclick="loadExercise('firstapp')">Load in Editor ‚Üí</button>
                </div>
            </div>

            <!-- Routes Tab -->
            <div id="routes" class="tab-content">
                <h2>Routes & URL Parameters üõ§Ô∏è</h2>
                <p>Routes define what happens when users visit different URLs. Let's explore dynamic routes!</p>

                <h3>Dynamic Routes with Variables</h3>
                <p>Capture parts of the URL as function parameters:</p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><span class="decorator">@app.route</span>(<span class="string">"/user/&lt;username&gt;"</span>)
<span class="keyword">def</span> <span class="function">show_user</span>(username):
    <span class="keyword">return</span> <span class="string">f"Profile page for: </span>{username}<span class="string">"</span>

<span class="comment"># /user/alice ‚Üí "Profile page for: alice"</span>
<span class="comment"># /user/bob   ‚Üí "Profile page for: bob"</span></pre>
                </div>

                <h3>Type Converters</h3>
                <p>Specify the expected type for URL parameters:</p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><span class="comment"># String (default)</span>
<span class="decorator">@app.route</span>(<span class="string">"/user/&lt;username&gt;"</span>)
<span class="keyword">def</span> <span class="function">user</span>(username):   <span class="comment"># username is a string</span>
    <span class="keyword">return</span> <span class="string">f"User: </span>{username}<span class="string">"</span>

<span class="comment"># Integer</span>
<span class="decorator">@app.route</span>(<span class="string">"/post/&lt;int:post_id&gt;"</span>)
<span class="keyword">def</span> <span class="function">show_post</span>(post_id):   <span class="comment"># post_id is an int</span>
    <span class="keyword">return</span> <span class="string">f"Post #</span>{post_id}<span class="string">"</span>

<span class="comment"># Float</span>
<span class="decorator">@app.route</span>(<span class="string">"/price/&lt;float:amount&gt;"</span>)
<span class="keyword">def</span> <span class="function">price</span>(amount):   <span class="comment"># amount is a float</span>
    <span class="keyword">return</span> <span class="string">f"Price: $</span>{amount:.2f}<span class="string">"</span>

<span class="comment"># Path (allows slashes)</span>
<span class="decorator">@app.route</span>(<span class="string">"/files/&lt;path:filepath&gt;"</span>)
<span class="keyword">def</span> <span class="function">get_file</span>(filepath):   <span class="comment"># filepath can include /</span>
    <span class="keyword">return</span> <span class="string">f"File: </span>{filepath}<span class="string">"</span></pre>
                </div>

                <table class="comparison-table">
                    <tr>
                        <th>Converter</th>
                        <th>Description</th>
                        <th>Example</th>
                    </tr>
                    <tr>
                        <td><code>string</code></td>
                        <td>Default, any text without /</td>
                        <td><code>/user/alice</code></td>
                    </tr>
                    <tr>
                        <td><code>int</code></td>
                        <td>Positive integers</td>
                        <td><code>/post/42</code></td>
                    </tr>
                    <tr>
                        <td><code>float</code></td>
                        <td>Floating point numbers</td>
                        <td><code>/price/19.99</code></td>
                    </tr>
                    <tr>
                        <td><code>path</code></td>
                        <td>Like string but includes /</td>
                        <td><code>/files/docs/report.pdf</code></td>
                    </tr>
                </table>

                <h3>Multiple Parameters</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><span class="decorator">@app.route</span>(<span class="string">"/user/&lt;username&gt;/post/&lt;int:post_id&gt;"</span>)
<span class="keyword">def</span> <span class="function">user_post</span>(username, post_id):
    <span class="keyword">return</span> <span class="string">f"</span>{username}<span class="string">'s post #</span>{post_id}<span class="string">"</span>

<span class="comment"># /user/alice/post/5 ‚Üí "alice's post #5"</span></pre>
                </div>

                <h3>Query Parameters</h3>
                <p>Access URL query strings like <code>/search?q=python&limit=10</code>:</p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request

app = Flask(__name__)

<span class="decorator">@app.route</span>(<span class="string">"/search"</span>)
<span class="keyword">def</span> <span class="function">search</span>():
    <span class="comment"># Get query parameters</span>
    query = request.args.get(<span class="string">"q"</span>, <span class="string">""</span>)  <span class="comment"># Default to empty string</span>
    limit = request.args.get(<span class="string">"limit"</span>, <span class="number">10</span>, <span class="builtin">type</span>=<span class="builtin">int</span>)  <span class="comment"># Convert to int</span>
    
    <span class="keyword">return</span> <span class="string">f"Searching for '</span>{query}<span class="string">' (limit: </span>{limit}<span class="string">)"</span>

<span class="comment"># /search?q=python&limit=5 ‚Üí "Searching for 'python' (limit: 5)"</span>
<span class="comment"># /search?q=flask         ‚Üí "Searching for 'flask' (limit: 10)"</span>
<span class="comment"># /search                  ‚Üí "Searching for '' (limit: 10)"</span></pre>
                </div>

                <div class="info-box concept">
                    <div class="info-box-title">üß† Path vs Query Parameters</div>
                    <ul style="margin-left: 20px; margin-top: 10px; color: var(--text-secondary);">
                        <li><strong>Path parameters</strong> (<code>/user/alice</code>): Identify a specific resource</li>
                        <li><strong>Query parameters</strong> (<code>?sort=date</code>): Filter, sort, or modify the request</li>
                    </ul>
                </div>

                <h3>URL Building with url_for</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, url_for

app = Flask(__name__)

<span class="decorator">@app.route</span>(<span class="string">"/"</span>)
<span class="keyword">def</span> <span class="function">home</span>():
    <span class="keyword">return</span> <span class="string">"Home"</span>

<span class="decorator">@app.route</span>(<span class="string">"/user/&lt;username&gt;"</span>)
<span class="keyword">def</span> <span class="function">profile</span>(username):
    <span class="keyword">return</span> <span class="string">f"Profile: </span>{username}<span class="string">"</span>

<span class="comment"># Generate URLs programmatically</span>
<span class="keyword">with</span> app.test_request_context():
    <span class="builtin">print</span>(url_for(<span class="string">"home"</span>))                    <span class="comment"># "/"</span>
    <span class="builtin">print</span>(url_for(<span class="string">"profile"</span>, username=<span class="string">"alice"</span>))  <span class="comment"># "/user/alice"</span></pre>
                </div>

                <div class="exercise">
                    <div class="exercise-header">
                        <span class="exercise-number">2</span>
                        <span class="exercise-title">Try It: Dynamic Routes</span>
                    </div>
                    <div class="exercise-description">
                        Create routes for a blog: <code>/posts</code> (list all), <code>/post/&lt;int:id&gt;</code> (single post), and <code>/posts?tag=python</code> (filter by tag).
                    </div>
                    <button class="load-exercise-btn" onclick="loadExercise('dynamicroutes')">Load in Editor ‚Üí</button>
                </div>
            </div>

            <!-- Templates Tab -->
            <div id="templates" class="tab-content">
                <h2>Templates with Jinja2 üìÑ</h2>
                <p>Return proper HTML pages using Flask's templating engine!</p>

                <h3>Project Structure</h3>
                <div class="code-block">
                    <pre>my_flask_app/
‚îú‚îÄ‚îÄ app.py
‚îú‚îÄ‚îÄ templates/          <span class="comment"># HTML templates go here</span>
‚îÇ   ‚îú‚îÄ‚îÄ base.html
‚îÇ   ‚îú‚îÄ‚îÄ home.html
‚îÇ   ‚îî‚îÄ‚îÄ user.html
‚îî‚îÄ‚îÄ static/             <span class="comment"># CSS, JS, images go here</span>
    ‚îî‚îÄ‚îÄ style.css</pre>
                </div>

                <h3>Basic Template</h3>
                <div class="code-block">
                    <span class="filename">templates/home.html</span>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><span class="keyword">&lt;!DOCTYPE html&gt;</span>
<span class="keyword">&lt;html&gt;</span>
<span class="keyword">&lt;head&gt;</span>
    <span class="keyword">&lt;title&gt;</span>{{ title }}<span class="keyword">&lt;/title&gt;</span>
<span class="keyword">&lt;/head&gt;</span>
<span class="keyword">&lt;body&gt;</span>
    <span class="keyword">&lt;h1&gt;</span>Hello, {{ name }}!<span class="keyword">&lt;/h1&gt;</span>
    <span class="keyword">&lt;p&gt;</span>Welcome to our site.<span class="keyword">&lt;/p&gt;</span>
<span class="keyword">&lt;/body&gt;</span>
<span class="keyword">&lt;/html&gt;</span></pre>
                </div>

                <div class="code-block">
                    <span class="filename">app.py</span>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, render_template

app = Flask(__name__)

<span class="decorator">@app.route</span>(<span class="string">"/"</span>)
<span class="keyword">def</span> <span class="function">home</span>():
    <span class="keyword">return</span> render_template(
        <span class="string">"home.html"</span>,
        title=<span class="string">"My Site"</span>,
        name=<span class="string">"Alice"</span>
    )</pre>
                </div>

                <h3>Jinja2 Syntax</h3>
                <table class="comparison-table">
                    <tr>
                        <th>Syntax</th>
                        <th>Purpose</th>
                        <th>Example</th>
                    </tr>
                    <tr>
                        <td><code>{{ }}</code></td>
                        <td>Output a variable</td>
                        <td><code>{{ user.name }}</code></td>
                    </tr>
                    <tr>
                        <td><code>{% %}</code></td>
                        <td>Control flow (if, for)</td>
                        <td><code>{% if logged_in %}</code></td>
                    </tr>
                    <tr>
                        <td><code>{# #}</code></td>
                        <td>Comments</td>
                        <td><code>{# This is hidden #}</code></td>
                    </tr>
                </table>

                <h3>Loops and Conditionals</h3>
                <div class="code-block">
                    <span class="filename">templates/posts.html</span>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><span class="keyword">&lt;h1&gt;</span>Blog Posts<span class="keyword">&lt;/h1&gt;</span>

<span class="comment">{# Check if there are posts #}</span>
<span class="route">{% if posts %}</span>
    <span class="keyword">&lt;ul&gt;</span>
    <span class="route">{% for post in posts %}</span>
        <span class="keyword">&lt;li&gt;</span>
            <span class="keyword">&lt;a</span> href=<span class="string">"/post/{{ post.id }}"</span><span class="keyword">&gt;</span>
                {{ post.title }}
            <span class="keyword">&lt;/a&gt;</span>
            <span class="route">{% if post.featured %}</span>
                <span class="keyword">&lt;span</span> class=<span class="string">"badge"</span><span class="keyword">&gt;</span>Featured<span class="keyword">&lt;/span&gt;</span>
            <span class="route">{% endif %}</span>
        <span class="keyword">&lt;/li&gt;</span>
    <span class="route">{% endfor %}</span>
    <span class="keyword">&lt;/ul&gt;</span>
<span class="route">{% else %}</span>
    <span class="keyword">&lt;p&gt;</span>No posts yet.<span class="keyword">&lt;/p&gt;</span>
<span class="route">{% endif %}</span></pre>
                </div>

                <div class="code-block">
                    <span class="filename">app.py</span>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><span class="decorator">@app.route</span>(<span class="string">"/posts"</span>)
<span class="keyword">def</span> <span class="function">posts</span>():
    posts = [
        {<span class="string">"id"</span>: <span class="number">1</span>, <span class="string">"title"</span>: <span class="string">"Flask Intro"</span>, <span class="string">"featured"</span>: <span class="keyword">True</span>},
        {<span class="string">"id"</span>: <span class="number">2</span>, <span class="string">"title"</span>: <span class="string">"Python Tips"</span>, <span class="string">"featured"</span>: <span class="keyword">False</span>},
        {<span class="string">"id"</span>: <span class="number">3</span>, <span class="string">"title"</span>: <span class="string">"Web Dev 101"</span>, <span class="string">"featured"</span>: <span class="keyword">False</span>},
    ]
    <span class="keyword">return</span> render_template(<span class="string">"posts.html"</span>, posts=posts)</pre>
                </div>

                <h3>Template Inheritance</h3>
                <p>Create a base template and extend it to avoid repetition:</p>

                <div class="code-block">
                    <span class="filename">templates/base.html</span>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><span class="keyword">&lt;!DOCTYPE html&gt;</span>
<span class="keyword">&lt;html&gt;</span>
<span class="keyword">&lt;head&gt;</span>
    <span class="keyword">&lt;title&gt;</span><span class="route">{% block title %}</span>My Site<span class="route">{% endblock %}</span><span class="keyword">&lt;/title&gt;</span>
    <span class="keyword">&lt;link</span> rel=<span class="string">"stylesheet"</span> href=<span class="string">"{{ url_for('static', filename='style.css') }}"</span><span class="keyword">&gt;</span>
<span class="keyword">&lt;/head&gt;</span>
<span class="keyword">&lt;body&gt;</span>
    <span class="keyword">&lt;nav&gt;</span>
        <span class="keyword">&lt;a</span> href=<span class="string">"{{ url_for('home') }}"</span><span class="keyword">&gt;</span>Home<span class="keyword">&lt;/a&gt;</span>
        <span class="keyword">&lt;a</span> href=<span class="string">"{{ url_for('posts') }}"</span><span class="keyword">&gt;</span>Posts<span class="keyword">&lt;/a&gt;</span>
    <span class="keyword">&lt;/nav&gt;</span>
    
    <span class="keyword">&lt;main&gt;</span>
        <span class="route">{% block content %}{% endblock %}</span>
    <span class="keyword">&lt;/main&gt;</span>
    
    <span class="keyword">&lt;footer&gt;</span>¬© 2024 My Site<span class="keyword">&lt;/footer&gt;</span>
<span class="keyword">&lt;/body&gt;</span>
<span class="keyword">&lt;/html&gt;</span></pre>
                </div>

                <div class="code-block">
                    <span class="filename">templates/home.html</span>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><span class="route">{% extends "base.html" %}</span>

<span class="route">{% block title %}</span>Home - My Site<span class="route">{% endblock %}</span>

<span class="route">{% block content %}</span>
    <span class="keyword">&lt;h1&gt;</span>Welcome!<span class="keyword">&lt;/h1&gt;</span>
    <span class="keyword">&lt;p&gt;</span>This is the home page.<span class="keyword">&lt;/p&gt;</span>
<span class="route">{% endblock %}</span></pre>
                </div>

                <div class="info-box tip">
                    <div class="info-box-title">üí° Template Inheritance Benefits</div>
                    <ul style="margin-left: 20px; margin-top: 10px; color: var(--text-secondary);">
                        <li>Define common layout once (nav, footer, CSS)</li>
                        <li>Override only what changes per page</li>
                        <li>Easy to maintain consistent look</li>
                    </ul>
                </div>

                <div class="exercise">
                    <div class="exercise-header">
                        <span class="exercise-number">3</span>
                        <span class="exercise-title">Try It: Templates</span>
                    </div>
                    <div class="exercise-description">
                        Create a Flask app that displays a list of bookmarks using a template. Each bookmark should show its title and URL.
                    </div>
                    <button class="load-exercise-btn" onclick="loadExercise('templates')">Load in Editor ‚Üí</button>
                </div>
            </div>

            <!-- Requests Tab -->
            <div id="requests" class="tab-content">
                <div class="day-separator">
                    <span class="day-badge">Day 6</span>
                </div>

                <h2>Handling Requests üì®</h2>
                <p>Learn to handle different HTTP methods and process form data!</p>

                <h3>HTTP Methods</h3>
                <div class="flow-diagram">
                    <div class="flow-box" style="border-color: var(--accent-green);">
                        <span class="method-badge get">GET</span><br>
                        <small>Retrieve data</small>
                    </div>
                    <div class="flow-box" style="border-color: var(--accent-blue);">
                        <span class="method-badge post">POST</span><br>
                        <small>Create data</small>
                    </div>
                    <div class="flow-box" style="border-color: var(--accent-orange);">
                        <span class="method-badge put">PUT</span><br>
                        <small>Update data</small>
                    </div>
                    <div class="flow-box" style="border-color: var(--accent-red);">
                        <span class="method-badge delete">DELETE</span><br>
                        <small>Delete data</small>
                    </div>
                </div>

                <h3>Handling POST Requests</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request

app = Flask(__name__)

<span class="comment"># Allow both GET and POST</span>
<span class="decorator">@app.route</span>(<span class="string">"/login"</span>, methods=[<span class="string">"GET"</span>, <span class="string">"POST"</span>])
<span class="keyword">def</span> <span class="function">login</span>():
    <span class="keyword">if</span> request.method == <span class="string">"POST"</span>:
        <span class="comment"># Get form data</span>
        username = request.form.get(<span class="string">"username"</span>)
        password = request.form.get(<span class="string">"password"</span>)
        
        <span class="comment"># Process login...</span>
        <span class="keyword">return</span> <span class="string">f"Logging in as </span>{username}<span class="string">"</span>
    
    <span class="comment"># GET request - show the form</span>
    <span class="keyword">return</span> <span class="string">'''
        &lt;form method="POST"&gt;
            &lt;input name="username" placeholder="Username"&gt;
            &lt;input name="password" type="password"&gt;
            &lt;button type="submit"&gt;Login&lt;/button&gt;
        &lt;/form&gt;
    '''</span></pre>
                </div>

                <h3>The Request Object</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><span class="keyword">from</span> flask <span class="keyword">import</span> request

<span class="comment"># Query parameters: /search?q=flask&limit=10</span>
query = request.args.get(<span class="string">"q"</span>)
limit = request.args.get(<span class="string">"limit"</span>, <span class="number">10</span>, <span class="builtin">type</span>=<span class="builtin">int</span>)

<span class="comment"># Form data (POST)</span>
username = request.form.get(<span class="string">"username"</span>)
email = request.form.get(<span class="string">"email"</span>)

<span class="comment"># JSON body</span>
data = request.get_json()

<span class="comment"># Files</span>
file = request.files.get(<span class="string">"document"</span>)

<span class="comment"># Headers</span>
auth = request.headers.get(<span class="string">"Authorization"</span>)

<span class="comment"># Method</span>
method = request.method  <span class="comment"># "GET", "POST", etc.</span></pre>
                </div>

                <h3>File Uploads</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request
<span class="keyword">from</span> pathlib <span class="keyword">import</span> Path

app = Flask(__name__)
UPLOAD_FOLDER = Path(<span class="string">"uploads"</span>)
UPLOAD_FOLDER.mkdir(exist_ok=<span class="keyword">True</span>)

<span class="decorator">@app.route</span>(<span class="string">"/upload"</span>, methods=[<span class="string">"POST"</span>])
<span class="keyword">def</span> <span class="function">upload_file</span>():
    <span class="keyword">if</span> <span class="string">"file"</span> <span class="keyword">not</span> <span class="keyword">in</span> request.files:
        <span class="keyword">return</span> <span class="string">"No file uploaded"</span>, <span class="number">400</span>
    
    file = request.files[<span class="string">"file"</span>]
    
    <span class="keyword">if</span> file.filename == <span class="string">""</span>:
        <span class="keyword">return</span> <span class="string">"No file selected"</span>, <span class="number">400</span>
    
    <span class="comment"># Save the file</span>
    filepath = UPLOAD_FOLDER / file.filename
    file.save(filepath)
    
    <span class="keyword">return</span> <span class="string">f"Uploaded: </span>{file.filename}<span class="string">"</span></pre>
                </div>

                <div class="info-box warning">
                    <div class="info-box-title">‚ö†Ô∏è Security Note</div>
                    <p>Never trust user-uploaded filenames! In production, use <code>werkzeug.utils.secure_filename()</code> to sanitize filenames and prevent directory traversal attacks.</p>
                </div>

                <h3>Redirects and Flash Messages</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, redirect, url_for, flash

app = Flask(__name__)
app.secret_key = <span class="string">"your-secret-key"</span>  <span class="comment"># Required for flash</span>

<span class="decorator">@app.route</span>(<span class="string">"/login"</span>, methods=[<span class="string">"POST"</span>])
<span class="keyword">def</span> <span class="function">login</span>():
    username = request.form.get(<span class="string">"username"</span>)
    
    <span class="keyword">if</span> username == <span class="string">"admin"</span>:
        flash(<span class="string">"Welcome back, admin!"</span>, <span class="string">"success"</span>)
        <span class="keyword">return</span> redirect(url_for(<span class="string">"dashboard"</span>))
    <span class="keyword">else</span>:
        flash(<span class="string">"Invalid username"</span>, <span class="string">"error"</span>)
        <span class="keyword">return</span> redirect(url_for(<span class="string">"login_page"</span>))</pre>
                </div>

                <div class="exercise">
                    <div class="exercise-header">
                        <span class="exercise-number">4</span>
                        <span class="exercise-title">Try It: Form Handling</span>
                    </div>
                    <div class="exercise-description">
                        Create a bookmark submission form with fields for title and URL. Handle the POST request and store bookmarks in a list.
                    </div>
                    <button class="load-exercise-btn" onclick="loadExercise('forms')">Load in Editor ‚Üí</button>
                </div>
            </div>

            <!-- JSON APIs Tab -->
            <div id="json" class="tab-content">
                <h2>Building JSON APIs üîå</h2>
                <p>Create RESTful APIs that return JSON - the foundation for your Document Analyzer backend!</p>

                <h3>Returning JSON</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, jsonify

app = Flask(__name__)

<span class="decorator">@app.route</span>(<span class="string">"/api/status"</span>)
<span class="keyword">def</span> <span class="function">status</span>():
    <span class="keyword">return</span> jsonify({
        <span class="string">"status"</span>: <span class="string">"ok"</span>,
        <span class="string">"version"</span>: <span class="string">"1.0.0"</span>
    })

<span class="comment"># Response:
# {
#   "status": "ok",
#   "version": "1.0.0"
# }</span></pre>
                </div>

                <h3>RESTful Bookmarks API</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, jsonify, request
<span class="keyword">from</span> uuid <span class="keyword">import</span> uuid4

app = Flask(__name__)

<span class="comment"># In-memory storage</span>
bookmarks = {}

<span class="comment"># GET all bookmarks</span>
<span class="decorator">@app.route</span>(<span class="string">"/api/bookmarks"</span>)
<span class="keyword">def</span> <span class="function">get_bookmarks</span>():
    <span class="keyword">return</span> jsonify(<span class="builtin">list</span>(bookmarks.values()))

<span class="comment"># GET single bookmark</span>
<span class="decorator">@app.route</span>(<span class="string">"/api/bookmarks/&lt;bookmark_id&gt;"</span>)
<span class="keyword">def</span> <span class="function">get_bookmark</span>(bookmark_id):
    <span class="keyword">if</span> bookmark_id <span class="keyword">not</span> <span class="keyword">in</span> bookmarks:
        <span class="keyword">return</span> jsonify({<span class="string">"error"</span>: <span class="string">"Not found"</span>}), <span class="number">404</span>
    <span class="keyword">return</span> jsonify(bookmarks[bookmark_id])

<span class="comment"># POST create bookmark</span>
<span class="decorator">@app.route</span>(<span class="string">"/api/bookmarks"</span>, methods=[<span class="string">"POST"</span>])
<span class="keyword">def</span> <span class="function">create_bookmark</span>():
    data = request.get_json()
    
    <span class="keyword">if</span> <span class="keyword">not</span> data <span class="keyword">or</span> <span class="string">"url"</span> <span class="keyword">not</span> <span class="keyword">in</span> data:
        <span class="keyword">return</span> jsonify({<span class="string">"error"</span>: <span class="string">"URL required"</span>}), <span class="number">400</span>
    
    bookmark_id = <span class="builtin">str</span>(uuid4())
    bookmark = {
        <span class="string">"id"</span>: bookmark_id,
        <span class="string">"title"</span>: data.get(<span class="string">"title"</span>, <span class="string">"Untitled"</span>),
        <span class="string">"url"</span>: data[<span class="string">"url"</span>]
    }
    bookmarks[bookmark_id] = bookmark
    
    <span class="keyword">return</span> jsonify(bookmark), <span class="number">201</span>

<span class="comment"># DELETE bookmark</span>
<span class="decorator">@app.route</span>(<span class="string">"/api/bookmarks/&lt;bookmark_id&gt;"</span>, methods=[<span class="string">"DELETE"</span>])
<span class="keyword">def</span> <span class="function">delete_bookmark</span>(bookmark_id):
    <span class="keyword">if</span> bookmark_id <span class="keyword">not</span> <span class="keyword">in</span> bookmarks:
        <span class="keyword">return</span> jsonify({<span class="string">"error"</span>: <span class="string">"Not found"</span>}), <span class="number">404</span>
    
    <span class="keyword">del</span> bookmarks[bookmark_id]
    <span class="keyword">return</span> jsonify({<span class="string">"message"</span>: <span class="string">"Deleted"</span>})</pre>
                </div>

                <h3>API Endpoints Summary</h3>
                <div class="endpoint">
                    <span class="method-badge get">GET</span>
                    <span class="path">/api/bookmarks</span>
                    <span class="desc">List all bookmarks</span>
                </div>
                <div class="endpoint">
                    <span class="method-badge get">GET</span>
                    <span class="path">/api/bookmarks/:id</span>
                    <span class="desc">Get single bookmark</span>
                </div>
                <div class="endpoint">
                    <span class="method-badge post">POST</span>
                    <span class="path">/api/bookmarks</span>
                    <span class="desc">Create bookmark</span>
                </div>
                <div class="endpoint">
                    <span class="method-badge delete">DELETE</span>
                    <span class="path">/api/bookmarks/:id</span>
                    <span class="desc">Delete bookmark</span>
                </div>

                <h3>HTTP Status Codes</h3>
                <table class="comparison-table">
                    <tr>
                        <th>Code</th>
                        <th>Meaning</th>
                        <th>When to Use</th>
                    </tr>
                    <tr>
                        <td><code>200</code></td>
                        <td>OK</td>
                        <td>Successful GET, PUT, DELETE</td>
                    </tr>
                    <tr>
                        <td><code>201</code></td>
                        <td>Created</td>
                        <td>Successful POST (resource created)</td>
                    </tr>
                    <tr>
                        <td><code>400</code></td>
                        <td>Bad Request</td>
                        <td>Invalid input data</td>
                    </tr>
                    <tr>
                        <td><code>404</code></td>
                        <td>Not Found</td>
                        <td>Resource doesn't exist</td>
                    </tr>
                    <tr>
                        <td><code>500</code></td>
                        <td>Server Error</td>
                        <td>Something went wrong</td>
                    </tr>
                </table>

                <h3>Error Handling</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, jsonify

app = Flask(__name__)

<span class="comment"># Custom error handlers</span>
<span class="decorator">@app.errorhandler</span>(<span class="number">404</span>)
<span class="keyword">def</span> <span class="function">not_found</span>(error):
    <span class="keyword">return</span> jsonify({<span class="string">"error"</span>: <span class="string">"Resource not found"</span>}), <span class="number">404</span>

<span class="decorator">@app.errorhandler</span>(<span class="number">500</span>)
<span class="keyword">def</span> <span class="function">server_error</span>(error):
    <span class="keyword">return</span> jsonify({<span class="string">"error"</span>: <span class="string">"Internal server error"</span>}), <span class="number">500</span>

<span class="comment"># Custom exception</span>
<span class="keyword">class</span> <span class="class-name">ValidationError</span>(<span class="class-name">Exception</span>):
    <span class="keyword">pass</span>

<span class="decorator">@app.errorhandler</span>(ValidationError)
<span class="keyword">def</span> <span class="function">handle_validation</span>(error):
    <span class="keyword">return</span> jsonify({<span class="string">"error"</span>: <span class="builtin">str</span>(error)}), <span class="number">400</span></pre>
                </div>

                <div class="info-box flask">
                    <div class="info-box-title">üéØ Connecting to Your Projects</div>
                    <p>This JSON API pattern is exactly what you'll use in your Document Analyzer! The endpoints will look like:</p>
                    <ul style="margin-left: 20px; margin-top: 10px; color: var(--text-secondary);">
                        <li><code>POST /api/upload</code> - Upload document</li>
                        <li><code>GET /api/documents</code> - List all documents</li>
                        <li><code>GET /api/documents/:id/analysis</code> - Get analysis results</li>
                    </ul>
                </div>

                <div class="exercise">
                    <div class="exercise-header">
                        <span class="exercise-number">5</span>
                        <span class="exercise-title">Try It: Complete Bookmarks API</span>
                    </div>
                    <div class="exercise-description">
                        Build a complete CRUD API for bookmarks including search functionality (<code>GET /api/bookmarks?q=search_term</code>).
                    </div>
                    <button class="load-exercise-btn" onclick="loadExercise('jsonapi')">Load in Editor ‚Üí</button>
                </div>
            </div>

            <!-- Exercises Tab -->
            <div id="exercises" class="tab-content">
                <h2>Practice Exercises üéØ</h2>
                <p>Put your Flask skills to the test with these exercises!</p>

                <div class="exercise">
                    <div class="exercise-header">
                        <span class="exercise-number">1</span>
                        <span class="exercise-title">Todo List API</span>
                    </div>
                    <div class="exercise-description">
                        Create a Todo List API with endpoints to list, create, update (mark complete), and delete todos. Include a <code>completed</code> boolean field.
                    </div>
                    <button class="load-exercise-btn" onclick="loadExercise('todoapi')">Load in Editor ‚Üí</button>
                </div>

                <div class="exercise">
                    <div class="exercise-header">
                        <span class="exercise-number">2</span>
                        <span class="exercise-title">Notes App with Templates</span>
                    </div>
                    <div class="exercise-description">
                        Build a simple notes app with HTML templates. Users should be able to view all notes, create new notes via a form, and view individual notes.
                    </div>
                    <button class="load-exercise-btn" onclick="loadExercise('notesapp')">Load in Editor ‚Üí</button>
                </div>

                <div class="exercise">
                    <div class="exercise-header">
                        <span class="exercise-number">3</span>
                        <span class="exercise-title">URL Shortener</span>
                    </div>
                    <div class="exercise-description">
                        Create a URL shortener service. <code>POST /api/shorten</code> with a URL returns a short code. <code>GET /&lt;short_code&gt;</code> redirects to the original URL.
                    </div>
                    <button class="load-exercise-btn" onclick="loadExercise('urlshortener')">Load in Editor ‚Üí</button>
                </div>

                <div class="exercise">
                    <div class="exercise-header">
                        <span class="exercise-number">4</span>
                        <span class="exercise-title">File Metadata API</span>
                    </div>
                    <div class="exercise-description">
                        Build an API that accepts file uploads and returns metadata (filename, size, type) without storing the file. This mimics part of your Document Analyzer!
                    </div>
                    <button class="load-exercise-btn" onclick="loadExercise('filemetadata')">Load in Editor ‚Üí</button>
                </div>
            </div>

            <!-- Challenge Tab -->
            <div id="challenge" class="tab-content">
                <h2>Final Challenge: Bookmarks API üöÄ</h2>
                <p>Combine everything you've learned into a complete application!</p>

                <div class="info-box concept">
                    <div class="info-box-title">üéØ The Mission</div>
                    <p>Build a full-featured Bookmarks API with both JSON endpoints AND a simple HTML interface. This directly prepares you for the Document Analyzer project!</p>
                </div>

                <h3>Requirements</h3>

                <h4>JSON API Endpoints</h4>
                <div class="endpoint">
                    <span class="method-badge get">GET</span>
                    <span class="path">/api/bookmarks</span>
                    <span class="desc">List all bookmarks</span>
                </div>
                <div class="endpoint">
                    <span class="method-badge get">GET</span>
                    <span class="path">/api/bookmarks?q=term</span>
                    <span class="desc">Search bookmarks</span>
                </div>
                <div class="endpoint">
                    <span class="method-badge get">GET</span>
                    <span class="path">/api/bookmarks/:id</span>
                    <span class="desc">Get single bookmark</span>
                </div>
                <div class="endpoint">
                    <span class="method-badge post">POST</span>
                    <span class="path">/api/bookmarks</span>
                    <span class="desc">Create bookmark</span>
                </div>
                <div class="endpoint">
                    <span class="method-badge delete">DELETE</span>
                    <span class="path">/api/bookmarks/:id</span>
                    <span class="desc">Delete bookmark</span>
                </div>

                <h4>HTML Interface</h4>
                <div class="endpoint">
                    <span class="method-badge get">GET</span>
                    <span class="path">/</span>
                    <span class="desc">Home page with bookmark list</span>
                </div>
                <div class="endpoint">
                    <span class="method-badge get">GET</span>
                    <span class="path">/add</span>
                    <span class="desc">Form to add bookmark</span>
                </div>
                <div class="endpoint">
                    <span class="method-badge post">POST</span>
                    <span class="path">/add</span>
                    <span class="desc">Handle form submission</span>
                </div>

                <h3>Bonus Features</h3>
                <ul class="checklist">
                    <li>Add tags to bookmarks</li>
                    <li>Filter by tag: <code>/api/bookmarks?tag=python</code></li>
                    <li>Export bookmarks as JSON file</li>
                    <li>Import bookmarks from JSON</li>
                    <li>Bookmark statistics endpoint</li>
                </ul>

                <h3>Data Structure</h3>
                <div class="code-block">
                    <pre>{
    <span class="string">"id"</span>: <span class="string">"abc123"</span>,
    <span class="string">"title"</span>: <span class="string">"Flask Documentation"</span>,
    <span class="string">"url"</span>: <span class="string">"https://flask.palletsprojects.com"</span>,
    <span class="string">"tags"</span>: [<span class="string">"python"</span>, <span class="string">"web"</span>, <span class="string">"flask"</span>],
    <span class="string">"created_at"</span>: <span class="string">"2024-01-15T10:30:00"</span>
}</pre>
                </div>

                <button class="load-exercise-btn" onclick="loadExercise('challenge')">Load Challenge Template ‚Üí</button>

                <div class="info-box tip" style="margin-top: 30px;">
                    <div class="info-box-title">üéâ Congratulations!</div>
                    <p>After completing this challenge, you'll have built a real Flask application with:</p>
                    <ul style="margin-left: 20px; margin-top: 10px; color: var(--text-secondary);">
                        <li>RESTful API endpoints</li>
                        <li>HTML templates</li>
                        <li>Form handling</li>
                        <li>Error handling</li>
                        <li>Search functionality</li>
                    </ul>
                    <p style="margin-top: 10px;">These same patterns will power your Document Analyzer and Content Aggregator!</p>
                </div>
            </div>
        </div>

        <!-- Right Panel: Code Editor -->
        <div class="editor-panel">
            <div class="editor-header">
                <div class="editor-title">
                    <div class="dot green"></div>
                    <span>app.py</span>
                </div>
                <div class="editor-actions">
                    <button class="editor-btn" onclick="resetEditor()">
                        ‚Ü∫ Reset
                    </button>
                    <button class="editor-btn" onclick="copyEditorCode()">
                        üìã Copy
                    </button>
                    <button class="editor-btn run" onclick="runCode()">
                        ‚ñ∂ Run
                    </button>
                </div>
            </div>
            <div class="code-editor-container">
                <div class="code-editor-wrapper">
                    <textarea class="code-editor" id="codeEditor" spellcheck="false">
# Welcome to Flask Basics! üå∂Ô∏è
# This is a simulated environment - copy code to run locally

from flask import Flask, jsonify, request

app = Flask(__name__)

# Simple in-memory storage
bookmarks = {
    "1": {"id": "1", "title": "Python Docs", "url": "https://python.org"},
    "2": {"id": "2", "title": "Flask Docs", "url": "https://flask.palletsprojects.com"},
}

@app.route("/")
def home():
    return "Welcome to my Flask App!"

@app.route("/api/bookmarks")
def get_bookmarks():
    return jsonify(list(bookmarks.values()))

@app.route("/api/bookmarks/<bookmark_id>")
def get_bookmark(bookmark_id):
    if bookmark_id not in bookmarks:
        return jsonify({"error": "Not found"}), 404
    return jsonify(bookmarks[bookmark_id])

# Simulated test
print("Flask App Routes:")
print("  GET  /")
print("  GET  /api/bookmarks")
print("  GET  /api/bookmarks/<id>")
print()
print("Sample data:")
for b in bookmarks.values():
    print(f"  - {b['title']}: {b['url']}")</textarea>
                </div>
            </div>
            <div class="output-panel">
                <div class="output-header">
                    <div class="output-title">
                        <span>üì§ Output</span>
                    </div>
                    <span class="output-status success" id="outputStatus">Ready</span>
                </div>
                <div class="output-content" id="outputContent">
                    <span style="color: var(--text-muted);">Click "Run" to execute your code...</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab Navigation
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
            updateProgress(tabId);
        }

        const tabOrder = ['overview', 'intro', 'routes', 'templates', 'requests', 'json', 'exercises', 'challenge'];
        function updateProgress(tabId) {
            const index = tabOrder.indexOf(tabId);
            const progress = ((index + 1) / tabOrder.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function runCode() {
            const code = document.getElementById('codeEditor').value;
            const outputContent = document.getElementById('outputContent');
            const outputStatus = document.getElementById('outputStatus');

            try {
                const output = simulatePython(code);
                outputContent.innerHTML = output;
                outputStatus.textContent = 'Success';
                outputStatus.className = 'output-status success';
            } catch (e) {
                outputContent.innerHTML = `<span style="color: var(--accent-red);">Error: ${e.message}</span>`;
                outputStatus.textContent = 'Error';
                outputStatus.className = 'output-status error';
            }
        }

        function simulatePython(code) {
            let output = [];
            const lines = code.split('\n');

            for (let line of lines) {
                line = line.trim();
                if (line.startsWith('#') || line === '') continue;

                if (line.startsWith('print(')) {
                    const content = extractPrintContent(line);
                    output.push(evaluateContent(content, code));
                }
            }

            if (output.length === 0) {
                return '<span style="color: var(--text-muted);">No output. This Flask code needs to be run locally!</span><br><br>' +
                       '<span style="color: var(--accent-green);">To run:</span><br>' +
                       '1. Save as app.py<br>' +
                       '2. Run: python app.py<br>' +
                       '3. Visit: http://127.0.0.1:5000';
            }

            return output.map(line => `<div class="output-line">${escapeHtml(line)}</div>`).join('');
        }

        function extractPrintContent(line) {
            const match = line.match(/print\((.*)\)$/);
            return match ? match[1] : '';
        }

        function evaluateContent(content, fullCode) {
            if (content.startsWith('f"') || content.startsWith("f'")) {
                return evaluateFString(content);
            }
            
            if ((content.startsWith('"') && content.endsWith('"')) ||
                (content.startsWith("'") && content.endsWith("'"))) {
                return content.slice(1, -1);
            }

            return `<${content}>`;
        }

        function evaluateFString(fstring) {
            let content = fstring.slice(2, -1);
            return content.replace(/\{[^}]+\}/g, '<value>');
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function resetEditor() {
            document.getElementById('codeEditor').value = `# Welcome to Flask Basics! üå∂Ô∏è
# This is a simulated environment - copy code to run locally

from flask import Flask, jsonify, request

app = Flask(__name__)

# Simple in-memory storage
bookmarks = {
    "1": {"id": "1", "title": "Python Docs", "url": "https://python.org"},
    "2": {"id": "2", "title": "Flask Docs", "url": "https://flask.palletsprojects.com"},
}

@app.route("/")
def home():
    return "Welcome to my Flask App!"

@app.route("/api/bookmarks")
def get_bookmarks():
    return jsonify(list(bookmarks.values()))

@app.route("/api/bookmarks/<bookmark_id>")
def get_bookmark(bookmark_id):
    if bookmark_id not in bookmarks:
        return jsonify({"error": "Not found"}), 404
    return jsonify(bookmarks[bookmark_id])

# Simulated test
print("Flask App Routes:")
print("  GET  /")
print("  GET  /api/bookmarks")
print("  GET  /api/bookmarks/<id>")
print()
print("Sample data:")
for b in bookmarks.values():
    print(f"  - {b['title']}: {b['url']}")`;

            document.getElementById('outputContent').innerHTML = 
                '<span style="color: var(--text-muted);">Click "Run" to execute your code...</span>';
            document.getElementById('outputStatus').textContent = 'Ready';
            document.getElementById('outputStatus').className = 'output-status success';
        }

        function copyEditorCode() {
            const code = document.getElementById('codeEditor').value;
            navigator.clipboard.writeText(code).then(() => {
                const btn = event.target;
                const originalText = btn.innerHTML;
                btn.innerHTML = '‚úì Copied!';
                setTimeout(() => btn.innerHTML = originalText, 2000);
            });
        }

        function copyCode(btn) {
            const codeBlock = btn.parentElement;
            const code = codeBlock.querySelector('pre').textContent;
            navigator.clipboard.writeText(code).then(() => {
                btn.textContent = 'Copied!';
                setTimeout(() => btn.textContent = 'Copy', 2000);
            });
        }

        // Exercise templates
        const exercises = {
            firstapp: `# Exercise 1: Your First Flask App
# Create routes for /, /hello, and /goodbye

from flask import Flask

app = Flask(__name__)

@app.route("/")
def home():
    return "Welcome to my first Flask app!"

@app.route("/hello")
def hello():
    return "Hello there! üëã"

@app.route("/goodbye")
def goodbye():
    return "Goodbye! See you soon! üëã"

if __name__ == "__main__":
    app.run(debug=True)

# Test output
print("Routes created:")
print("  GET / -> Welcome message")
print("  GET /hello -> Hello greeting")
print("  GET /goodbye -> Goodbye message")`,

            dynamicroutes: `# Exercise 2: Dynamic Routes for a Blog

from flask import Flask, request

app = Flask(__name__)

# Sample posts data
posts = [
    {"id": 1, "title": "Flask Intro", "tag": "python"},
    {"id": 2, "title": "Web Development", "tag": "web"},
    {"id": 3, "title": "Python Tips", "tag": "python"},
]

@app.route("/posts")
def list_posts():
    # Check for tag filter
    tag = request.args.get("tag")
    
    if tag:
        filtered = [p for p in posts if p["tag"] == tag]
        return f"Posts with tag '{tag}': {filtered}"
    
    return f"All posts: {posts}"

@app.route("/post/<int:post_id>")
def show_post(post_id):
    for post in posts:
        if post["id"] == post_id:
            return f"Post: {post}"
    return "Post not found", 404

if __name__ == "__main__":
    app.run(debug=True)

# Test output
print("Blog Routes:")
print("  GET /posts -> List all posts")
print("  GET /posts?tag=python -> Filter by tag")
print("  GET /post/1 -> Single post")
print()
print("Sample posts:", posts)`,

            templates: `# Exercise 3: Templates (simulated without actual files)
# In real usage, create templates/bookmarks.html

from flask import Flask, render_template_string

app = Flask(__name__)

bookmarks = [
    {"title": "Python Docs", "url": "https://python.org"},
    {"title": "Flask Guide", "url": "https://flask.palletsprojects.com"},
    {"title": "Real Python", "url": "https://realpython.com"},
]

# Template as string (normally in templates/bookmarks.html)
TEMPLATE = """
<!DOCTYPE html>
<html>
<head>
    <title>My Bookmarks</title>
</head>
<body>
    <h1>My Bookmarks</h1>
    <ul>
    {% for bookmark in bookmarks %}
        <li>
            <a href="{{ bookmark.url }}">{{ bookmark.title }}</a>
        </li>
    {% endfor %}
    </ul>
</body>
</html>
"""

@app.route("/")
def home():
    return render_template_string(TEMPLATE, bookmarks=bookmarks)

if __name__ == "__main__":
    app.run(debug=True)

# Test output
print("Bookmarks page template created!")
print()
print("Bookmarks to display:")
for b in bookmarks:
    print(f"  - {b['title']}: {b['url']}")`,

            forms: `# Exercise 4: Form Handling

from flask import Flask, request, redirect

app = Flask(__name__)

# In-memory storage
bookmarks = []

FORM_HTML = """
<!DOCTYPE html>
<html>
<head><title>Add Bookmark</title></head>
<body>
    <h1>Add Bookmark</h1>
    <form method="POST">
        <input name="title" placeholder="Title" required><br><br>
        <input name="url" placeholder="URL" required><br><br>
        <button type="submit">Add Bookmark</button>
    </form>
    
    <h2>Current Bookmarks ({{ count }})</h2>
    <ul>
    {% for b in bookmarks %}
        <li>{{ b.title }} - {{ b.url }}</li>
    {% endfor %}
    </ul>
</body>
</html>
"""

@app.route("/", methods=["GET", "POST"])
def home():
    if request.method == "POST":
        title = request.form.get("title")
        url = request.form.get("url")
        
        if title and url:
            bookmarks.append({"title": title, "url": url})
        
        return redirect("/")
    
    # For simulation, just show what we'd render
    return f"Form page with {len(bookmarks)} bookmarks"

if __name__ == "__main__":
    app.run(debug=True)

# Simulate adding bookmarks
bookmarks.append({"title": "Test", "url": "https://test.com"})

print("Form handling demo:")
print(f"  Current bookmarks: {len(bookmarks)}")
print(f"  Bookmarks: {bookmarks}")`,

            jsonapi: `# Exercise 5: Complete Bookmarks JSON API

from flask import Flask, jsonify, request
from uuid import uuid4
from datetime import datetime

app = Flask(__name__)

# In-memory storage
bookmarks = {}

@app.route("/api/bookmarks")
def get_bookmarks():
    # Search functionality
    query = request.args.get("q", "").lower()
    
    results = list(bookmarks.values())
    
    if query:
        results = [
            b for b in results
            if query in b["title"].lower() or query in b["url"].lower()
        ]
    
    return jsonify(results)

@app.route("/api/bookmarks/<bookmark_id>")
def get_bookmark(bookmark_id):
    if bookmark_id not in bookmarks:
        return jsonify({"error": "Not found"}), 404
    return jsonify(bookmarks[bookmark_id])

@app.route("/api/bookmarks", methods=["POST"])
def create_bookmark():
    data = request.get_json()
    
    if not data or "url" not in data:
        return jsonify({"error": "URL is required"}), 400
    
    bookmark_id = str(uuid4())[:8]
    bookmark = {
        "id": bookmark_id,
        "title": data.get("title", "Untitled"),
        "url": data["url"],
        "tags": data.get("tags", []),
        "created_at": datetime.now().isoformat()
    }
    bookmarks[bookmark_id] = bookmark
    
    return jsonify(bookmark), 201

@app.route("/api/bookmarks/<bookmark_id>", methods=["DELETE"])
def delete_bookmark(bookmark_id):
    if bookmark_id not in bookmarks:
        return jsonify({"error": "Not found"}), 404
    
    del bookmarks[bookmark_id]
    return jsonify({"message": "Deleted successfully"})

if __name__ == "__main__":
    app.run(debug=True)

# Test the API
print("Bookmarks API Endpoints:")
print("  GET    /api/bookmarks      - List all")
print("  GET    /api/bookmarks?q=x  - Search")
print("  GET    /api/bookmarks/:id  - Get one")
print("  POST   /api/bookmarks      - Create")
print("  DELETE /api/bookmarks/:id  - Delete")`,

            todoapi: `# Exercise: Todo List API

from flask import Flask, jsonify, request
from uuid import uuid4
from datetime import datetime

app = Flask(__name__)

todos = {}

@app.route("/api/todos")
def get_todos():
    # Optional filter by completed status
    completed = request.args.get("completed")
    
    results = list(todos.values())
    
    if completed is not None:
        is_completed = completed.lower() == "true"
        results = [t for t in results if t["completed"] == is_completed]
    
    return jsonify(results)

@app.route("/api/todos/<todo_id>")
def get_todo(todo_id):
    if todo_id not in todos:
        return jsonify({"error": "Not found"}), 404
    return jsonify(todos[todo_id])

@app.route("/api/todos", methods=["POST"])
def create_todo():
    data = request.get_json()
    
    if not data or "title" not in data:
        return jsonify({"error": "Title is required"}), 400
    
    todo_id = str(uuid4())[:8]
    todo = {
        "id": todo_id,
        "title": data["title"],
        "completed": False,
        "created_at": datetime.now().isoformat()
    }
    todos[todo_id] = todo
    
    return jsonify(todo), 201

@app.route("/api/todos/<todo_id>", methods=["PUT"])
def update_todo(todo_id):
    if todo_id not in todos:
        return jsonify({"error": "Not found"}), 404
    
    data = request.get_json()
    
    if "completed" in data:
        todos[todo_id]["completed"] = data["completed"]
    if "title" in data:
        todos[todo_id]["title"] = data["title"]
    
    return jsonify(todos[todo_id])

@app.route("/api/todos/<todo_id>", methods=["DELETE"])
def delete_todo(todo_id):
    if todo_id not in todos:
        return jsonify({"error": "Not found"}), 404
    
    del todos[todo_id]
    return jsonify({"message": "Deleted"})

if __name__ == "__main__":
    app.run(debug=True)

print("Todo API created!")
print("Endpoints: GET, POST, PUT, DELETE /api/todos")`,

            notesapp: `# Exercise: Notes App with Templates

from flask import Flask, render_template_string, request, redirect
from uuid import uuid4
from datetime import datetime

app = Flask(__name__)

notes = {}

BASE_TEMPLATE = """
<!DOCTYPE html>
<html>
<head>
    <title>{% block title %}Notes{% endblock %}</title>
    <style>
        body { font-family: sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        nav { margin-bottom: 20px; }
        nav a { margin-right: 15px; }
        .note { border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 5px; }
        form input, form textarea { width: 100%; margin: 5px 0; padding: 8px; }
        button { background: #007bff; color: white; padding: 10px 20px; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <nav>
        <a href="/">All Notes</a>
        <a href="/new">New Note</a>
    </nav>
    {% block content %}{% endblock %}
</body>
</html>
"""

LIST_TEMPLATE = BASE_TEMPLATE.replace(
    "{% block content %}{% endblock %}",
    """{% block content %}
    <h1>My Notes</h1>
    {% for note in notes %}
    <div class="note">
        <h3><a href="/note/{{ note.id }}">{{ note.title }}</a></h3>
        <p>{{ note.content[:100] }}...</p>
        <small>{{ note.created_at }}</small>
    </div>
    {% else %}
    <p>No notes yet. <a href="/new">Create one!</a></p>
    {% endfor %}
    {% endblock %}"""
)

@app.route("/")
def list_notes():
    return render_template_string(LIST_TEMPLATE, notes=list(notes.values()))

if __name__ == "__main__":
    app.run(debug=True)

print("Notes app created!")
print("Routes: /, /new, /note/<id>")`,

            urlshortener: `# Exercise: URL Shortener

from flask import Flask, jsonify, request, redirect
import random
import string

app = Flask(__name__)

# Storage: short_code -> original_url
urls = {}

def generate_code(length=6):
    chars = string.ascii_letters + string.digits
    return ''.join(random.choice(chars) for _ in range(length))

@app.route("/api/shorten", methods=["POST"])
def shorten_url():
    data = request.get_json()
    
    if not data or "url" not in data:
        return jsonify({"error": "URL is required"}), 400
    
    original_url = data["url"]
    
    # Generate unique short code
    short_code = generate_code()
    while short_code in urls:
        short_code = generate_code()
    
    urls[short_code] = original_url
    
    return jsonify({
        "short_code": short_code,
        "short_url": f"http://localhost:5000/{short_code}",
        "original_url": original_url
    }), 201

@app.route("/<short_code>")
def redirect_url(short_code):
    if short_code not in urls:
        return jsonify({"error": "URL not found"}), 404
    
    return redirect(urls[short_code])

@app.route("/api/stats")
def stats():
    return jsonify({
        "total_urls": len(urls),
        "urls": [{"code": k, "url": v} for k, v in urls.items()]
    })

if __name__ == "__main__":
    app.run(debug=True)

# Test
test_code = generate_code()
print(f"URL Shortener created!")
print(f"Sample short code: {test_code}")
print("Endpoints:")
print("  POST /api/shorten - Create short URL")
print("  GET /<code> - Redirect to original")`,

            filemetadata: `# Exercise: File Metadata API

from flask import Flask, jsonify, request

app = Flask(__name__)

ALLOWED_EXTENSIONS = {'txt', 'pdf', 'png', 'jpg', 'jpeg', 'gif', 'doc', 'docx'}

def allowed_file(filename):
    return '.' in filename and \\
           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS

def get_file_type(filename):
    ext = filename.rsplit('.', 1)[1].lower() if '.' in filename else 'unknown'
    type_map = {
        'txt': 'text/plain',
        'pdf': 'application/pdf',
        'png': 'image/png',
        'jpg': 'image/jpeg',
        'jpeg': 'image/jpeg',
        'gif': 'image/gif',
        'doc': 'application/msword',
        'docx': 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'
    }
    return type_map.get(ext, 'application/octet-stream')

@app.route("/api/analyze", methods=["POST"])
def analyze_file():
    if "file" not in request.files:
        return jsonify({"error": "No file provided"}), 400
    
    file = request.files["file"]
    
    if file.filename == "":
        return jsonify({"error": "No file selected"}), 400
    
    if not allowed_file(file.filename):
        return jsonify({"error": "File type not allowed"}), 400
    
    # Read file to get size (don't save it)
    file_content = file.read()
    file_size = len(file_content)
    
    metadata = {
        "filename": file.filename,
        "size_bytes": file_size,
        "size_readable": f"{file_size / 1024:.2f} KB",
        "content_type": get_file_type(file.filename),
        "extension": file.filename.rsplit('.', 1)[1].lower() if '.' in file.filename else None
    }
    
    return jsonify(metadata)

if __name__ == "__main__":
    app.run(debug=True)

print("File Metadata API created!")
print("Endpoint: POST /api/analyze")
print("Allowed types:", ALLOWED_EXTENSIONS)`,

            challenge: `# üöÄ FINAL CHALLENGE: Complete Bookmarks Application

from flask import Flask, jsonify, request, render_template_string, redirect
from uuid import uuid4
from datetime import datetime

app = Flask(__name__)
app.secret_key = "dev-secret-key"

# In-memory storage
bookmarks = {}

# ==================== API ENDPOINTS ====================

@app.route("/api/bookmarks")
def api_get_bookmarks():
    """List all bookmarks with optional search and tag filter."""
    query = request.args.get("q", "").lower()
    tag = request.args.get("tag", "").lower()
    
    results = list(bookmarks.values())
    
    # Filter by search query
    if query:
        results = [
            b for b in results
            if query in b["title"].lower() or query in b["url"].lower()
        ]
    
    # Filter by tag
    if tag:
        results = [
            b for b in results
            if tag in [t.lower() for t in b.get("tags", [])]
        ]
    
    return jsonify(results)

@app.route("/api/bookmarks/<bookmark_id>")
def api_get_bookmark(bookmark_id):
    """Get a single bookmark by ID."""
    if bookmark_id not in bookmarks:
        return jsonify({"error": "Bookmark not found"}), 404
    return jsonify(bookmarks[bookmark_id])

@app.route("/api/bookmarks", methods=["POST"])
def api_create_bookmark():
    """Create a new bookmark."""
    data = request.get_json()
    
    if not data:
        return jsonify({"error": "No data provided"}), 400
    if "url" not in data:
        return jsonify({"error": "URL is required"}), 400
    
    bookmark_id = str(uuid4())[:8]
    bookmark = {
        "id": bookmark_id,
        "title": data.get("title", "Untitled"),
        "url": data["url"],
        "tags": data.get("tags", []),
        "created_at": datetime.now().isoformat()
    }
    bookmarks[bookmark_id] = bookmark
    
    return jsonify(bookmark), 201

@app.route("/api/bookmarks/<bookmark_id>", methods=["DELETE"])
def api_delete_bookmark(bookmark_id):
    """Delete a bookmark."""
    if bookmark_id not in bookmarks:
        return jsonify({"error": "Bookmark not found"}), 404
    
    deleted = bookmarks.pop(bookmark_id)
    return jsonify({"message": "Deleted", "bookmark": deleted})

@app.route("/api/stats")
def api_stats():
    """Get bookmark statistics."""
    all_tags = []
    for b in bookmarks.values():
        all_tags.extend(b.get("tags", []))
    
    tag_counts = {}
    for tag in all_tags:
        tag_counts[tag] = tag_counts.get(tag, 0) + 1
    
    return jsonify({
        "total_bookmarks": len(bookmarks),
        "tags": tag_counts,
        "newest": max(bookmarks.values(), key=lambda x: x["created_at"])["title"] if bookmarks else None
    })

# ==================== HTML ROUTES ====================

HOME_TEMPLATE = """
<!DOCTYPE html>
<html>
<head>
    <title>My Bookmarks</title>
    <style>
        body { font-family: sans-serif; max-width: 900px; margin: 0 auto; padding: 20px; background: #f5f5f5; }
        h1 { color: #333; }
        nav { margin-bottom: 20px; }
        nav a { margin-right: 15px; color: #007bff; text-decoration: none; }
        .bookmark { background: white; padding: 15px; margin: 10px 0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .bookmark h3 { margin: 0 0 5px 0; }
        .bookmark a { color: #007bff; }
        .tags span { background: #e0e0e0; padding: 2px 8px; border-radius: 12px; font-size: 12px; margin-right: 5px; }
        .delete-btn { color: #dc3545; cursor: pointer; float: right; }
    </style>
</head>
<body>
    <h1>üìö My Bookmarks</h1>
    <nav>
        <a href="/">Home</a>
        <a href="/add">+ Add Bookmark</a>
    </nav>
    
    {% if bookmarks %}
        {% for b in bookmarks %}
        <div class="bookmark">
            <h3><a href="{{ b.url }}" target="_blank">{{ b.title }}</a></h3>
            <div class="tags">
                {% for tag in b.tags %}
                <span>{{ tag }}</span>
                {% endfor %}
            </div>
            <small>Added: {{ b.created_at[:10] }}</small>
        </div>
        {% endfor %}
    {% else %}
        <p>No bookmarks yet. <a href="/add">Add one!</a></p>
    {% endif %}
</body>
</html>
"""

@app.route("/")
def home():
    return render_template_string(HOME_TEMPLATE, bookmarks=list(bookmarks.values()))

# ==================== MAIN ====================

if __name__ == "__main__":
    # Add sample data
    sample = {
        "id": "sample1",
        "title": "Flask Documentation",
        "url": "https://flask.palletsprojects.com",
        "tags": ["python", "web", "docs"],
        "created_at": datetime.now().isoformat()
    }
    bookmarks["sample1"] = sample
    
    app.run(debug=True)

# Test output
print("üöÄ Bookmarks Application Ready!")
print()
print("API Endpoints:")
print("  GET    /api/bookmarks        - List all")
print("  GET    /api/bookmarks?q=x    - Search")
print("  GET    /api/bookmarks?tag=x  - Filter by tag")
print("  POST   /api/bookmarks        - Create")
print("  DELETE /api/bookmarks/:id    - Delete")
print("  GET    /api/stats            - Statistics")
print()
print("HTML Pages:")
print("  GET    /                     - Home page")
print("  GET    /add                  - Add form")
print()
print("Sample bookmark added:", bookmarks.get("sample1", {}).get("title"))`
        };

        function loadExercise(name) {
            if (exercises[name]) {
                document.getElementById('codeEditor').value = exercises[name];
                document.getElementById('outputContent').innerHTML = 
                    '<span style="color: var(--text-muted);">Exercise loaded! Click "Run" to test...</span>';
            }
        }

        // Handle tab key
        document.getElementById('codeEditor').addEventListener('keydown', function(e) {
            if (e.key === 'Tab') {
                e.preventDefault();
                const start = this.selectionStart;
                const end = this.selectionEnd;
                this.value = this.value.substring(0, start) + '    ' + this.value.substring(end);
                this.selectionStart = this.selectionEnd = start + 4;
            }
            if (e.ctrlKey && e.key === 'Enter') {
                runCode();
            }
        });

        updateProgress('overview');
    </script>
</body>
</html>
